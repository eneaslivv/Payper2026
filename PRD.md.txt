CoffeeSquad (CoffeeSaaS)

Producto: CoffeeSquad ‚Äì Integrated Management Suite
Tipo: SaaS Multi-Tenant para cafeter√≠as
Versi√≥n: 0.0.0 (Development)
Fecha: 2025-12-23
Estado: Pre-Production
Owner: Product / Engineering
Usuarios objetivo: Cafeter√≠as, cadenas peque√±as, operadores SaaS

1. üéØ OBJETIVO DEL PRODUCTO

CoffeeSquad permite a cafeter√≠as gestionar operaciones completas desde un √∫nico sistema:

Pedidos (POS + tablero)

Inventario y recetas

Men√∫ digital personalizable

Clientes y fidelizaci√≥n

Finanzas operativas

Staff y permisos

Administraci√≥n SaaS multi-tenant

El sistema est√° dise√±ado como SaaS escalable, con aislamiento estricto por tienda (tenant).

2. üßë‚Äçüíº ROLES DE USUARIO
Rol	Descripci√≥n
Super Admin	Gesti√≥n global SaaS
Store Owner	Due√±o del local
Manager	Operaci√≥n completa
Staff	Operaci√≥n diaria
Viewer	Solo lectura
3. üèóÔ∏è ALCANCE DEL PRODUCTO
3.1 Incluido (In Scope)

Autenticaci√≥n y onboarding

Gesti√≥n de tiendas (multi-tenant)

Inventario y productos

Recetas, variantes y addons

Dise√±o visual del men√∫

Creaci√≥n y gesti√≥n de pedidos

Tablero de pedidos

Clientes y loyalty

Roles y permisos (RBAC)

Auditor√≠a de acciones

IA para generaci√≥n de texto

PWA b√°sica

3.2 Excluido (Out of Scope ‚Äì por ahora)

Pagos autom√°ticos

Reportes fiscales

Integraciones contables

Multi-idioma

White-label avanzado

4. üß© M√ìDULOS FUNCIONALES
4.1 Autenticaci√≥n & Onboarding

Usuarios pueden:

Loguearse

Recuperar contrase√±a

Completar onboarding

Ser invitados a una tienda

Requerimientos:

No acceder a Dashboard sin onboarding completo

Asociaci√≥n correcta a store_id

4.2 Multi-Tenant & Seguridad

Requerimientos clave:

Cada usuario solo accede a datos de su tienda

Super Admin no ve datos operativos de tiendas

Todas las tablas con RLS activo

Criterio cr√≠tico:

No debe existir data leakage entre tiendas

4.3 Inventario

Funcionalidades:

CRUD de insumos

Control de stock

Alertas por bajo stock

Asociaci√≥n a recetas

4.4 Productos, Variantes y Addons

Productos

Precio base

Descripci√≥n

Categor√≠a

Variantes

Precio adicional

Asociadas a producto

Addons

Opcionales

Disponibles en pedidos

4.5 Dise√±o de Men√∫

Requerimientos:

Editor visual

Preview en vivo

Persistencia en JSONB:

stores.menu_theme

stores.menu_logic

4.6 Pedidos (POS + Board)

Creaci√≥n de pedidos

Productos + variantes + addons

Asociaci√≥n a mesa o cliente

Persistencia en DB

Order Board

Estados del pedido

Realtime updates

4.7 Mesas

Gesti√≥n de mesas

QR por mesa

Asociaci√≥n pedidos ‚Üî mesa

4.8 Clientes & Loyalty

Clientes

Datos b√°sicos

Historial de pedidos

Loyalty

Sistema de puntos

Trigger autom√°tico al cerrar pedido

4.9 Finanzas

Requerimientos:

Totales diarios / mensuales

Ingresos por pedidos

Visualizaci√≥n clara

4.10 Staff & Roles

Invitaci√≥n por email

Roles custom por tienda

Control de vistas y acciones (PermissionGuard)

4.11 Auditor√≠a

Acciones auditadas:

Crear / editar productos

Pedidos

Cambios de permisos

Configuraci√≥n de tienda

4.12 IA (Gemini)

Generaci√≥n de descripciones

No bloqueante

Manejo de errores API

5. ‚öôÔ∏è REQUERIMIENTOS NO FUNCIONALES
Seguridad

RLS obligatorio en todas las tablas

Edge Functions protegidas

No exponer Service Role Key

Performance

Carga inicial < 3s

Realtime eficiente

UX

Manejo de errores visible

No silent failures

Estados de carga claros

6. üîÅ FLUJOS CR√çTICOS
Flujo 1 ‚Äî Pedido completo

Crear pedido

Persistir pedido + items

Descontar stock

Asignar puntos

Reflejar en finanzas

Actualizar tablero realtime

Flujo 2 ‚Äî Invitaci√≥n de staff

Enviar invitaci√≥n

Crear usuario Auth

Crear perfil

Asignar rol

Acceso controlado

7. üß™ RELACI√ìN CON TESTSPRITE

Este PRD se utiliza para:

Derivar test cases

Validar cobertura funcional

Definir criterios de aceptaci√≥n

Generar tests manuales y autom√°ticos

üëâ Cada m√≥dulo del PRD mapea 1:1 con suites de TestSprite.

8. ‚úÖ CRITERIOS DE √âXITO (GO / NO-GO)

‚úî Autenticaci√≥n y roles correctos
‚úî No hay filtraci√≥n multi-tenant
‚úî Pedidos consistentes con inventario
‚úî Realtime funcional
‚úî Errores visibles y manejados
‚úî PRD 100% cubierto por tests

9. üìå NOTAS FINALES

Este PRD es:

La fuente madre

Inmutable salvo cambios de producto

Base para QA, desarrollo y auditor√≠a